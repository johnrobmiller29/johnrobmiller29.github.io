---
//src/components/header.astro
import Nav from "../components/Nav.astro";
import { Icon } from "astro-icon/components";
const siteName = "Taniti Tourism";
---

<header
  class="sticky top-0 z-50 flex w-full flex-col border-b border-slate-300 bg-white text-emerald-900 shadow-xl backdrop-blur-xl"
>
  <div
    class="flex w-full items-center justify-between gap-4 px-4 py-3 md:gap-6 md:px-6 lg:gap-10 lg:px-18"
  >
    <a href="/" class="flex items-center">
      <Icon
        name="tanitiLogo"
        class="h-20 w-auto fill-emerald-900 object-contain md:h-25"
      />

      <div id="nav-menu" class="hidden lg:block">
        <Nav isHeader={true} />
      </div>

      <button
        id="menu-toggle"
        class="size-nav-btn-control inline-flex justify-center rounded-sm border border-emerald-900 bg-slate-200 text-2xl lg:hidden"
        aria-expanded="false"
        aria-label="Toggle navigation menu"
      >
        <span class="p-1">&equiv;</span>
      </button>
    </a>
  </div>

  <script>
    const btn = document.querySelector("#menu-toggle");
    const menu = document.querySelector("#nav-menu");

    if (btn && menu) {
      btn.addEventListener("click", () => {
        menu.classList.toggle("hidden");
        const expanded = btn.getAttribute("aria-expanded") === "true" || false;
        btn.setAttribute("aria-expanded", String(!expanded));
      });

      const navLinks = document.querySelectorAll("#nav-menu a");

      navLinks.forEach((link) => {
        link.addEventListener("click", () => {
          menu.classList.add("hidden");
          btn.setAttribute("aria-expanded", "false");
        });
      });

      document.addEventListener("click", (e) => {
        const target = e.target as Element;
        if (!btn.contains(target) && !menu.contains(target)) {
          menu.classList.add("hidden");
          btn.setAttribute("aria-expanded", "false");
        }
      });
    }
  </script>
</header>
